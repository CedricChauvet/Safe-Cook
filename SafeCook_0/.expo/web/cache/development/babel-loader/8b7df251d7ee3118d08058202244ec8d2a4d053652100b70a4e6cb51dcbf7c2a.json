{"ast":null,"code":"import { MetroServerError } from './errors';\nimport { fetchAsync } from './fetchAsync';\nexport function fetchThenEvalAsync(url) {\n  return fetchAsync(url).then(({\n    body,\n    status,\n    headers\n  }) => {\n    if (headers?.has?.('Content-Type') != null && headers.get('Content-Type').includes('application/json')) {\n      throw new Error(JSON.parse(body).message || `Unknown error fetching '${url}'`);\n    }\n    if (status === 200) {\n      return eval(body);\n    } else {\n      if (process.env.NODE_ENV === 'development') {\n        const error = jsonParseOptional(body);\n        if (error) {\n          throw new MetroServerError(error, url);\n        }\n      }\n      throw new Error(`Failed to load split bundle from URL: ${url}\\n${body}`);\n    }\n  });\n}\nfunction jsonParseOptional(json) {\n  try {\n    return JSON.parse(json);\n  } catch {\n    return null;\n  }\n}","map":{"version":3,"names":["MetroServerError","fetchAsync","fetchThenEvalAsync","url","then","body","status","headers","has","get","includes","Error","JSON","parse","message","eval","process","env","NODE_ENV","error","jsonParseOptional","json"],"sources":["C:/Users/chauv/Desktop/holberton-demoday/Safe-Cook/SafeCook_0/node_modules/@expo/metro-runtime/src/async-require/fetchThenEvalJs.ts"],"sourcesContent":["/**\r\n * Copyright Â© 2022 650 Industries.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\nimport { MetroServerError } from './errors';\r\nimport { fetchAsync } from './fetchAsync';\r\n/**\r\n * Load a bundle for a URL using fetch + eval on native and script tag injection on web.\r\n *\r\n * @param url Given a statement like `import('./Bacon')` `bundlePath` would be `Bacon`.\r\n */\r\nexport function fetchThenEvalAsync(url: string): Promise<void> {\r\n  return fetchAsync(url).then(({ body, status, headers }) => {\r\n    if (\r\n      headers?.has?.('Content-Type') != null &&\r\n      headers.get('Content-Type')!.includes('application/json')\r\n    ) {\r\n      // Errors are returned as JSON.\r\n      throw new Error(JSON.parse(body).message || `Unknown error fetching '${url}'`);\r\n    }\r\n\r\n    if (status === 200) {\r\n      // eslint-disable-next-line no-eval\r\n      return eval(body);\r\n    } else {\r\n      // Format Metro errors if possible.\r\n      if (process.env.NODE_ENV === 'development') {\r\n        // body can be an error from Metro if a module is missing.\r\n        // {\"originModulePath\":\"/Users/evanbacon/Documents/GitHub/expo/.\",\"targetModuleName\":\"./http://localhost:8081/node_modules/react-native/index.js\",\"message\":\"...\"}\r\n        const error = jsonParseOptional(body);\r\n        if (error) {\r\n          // TODO: This is essentially like the Metro native red box errors. We should do a better job formatting them so\r\n          // the user experience doesn't feel bad. This can be tested by loading a split bundle that results in a missing module error from Metro.\r\n          throw new MetroServerError(error, url);\r\n        }\r\n      }\r\n\r\n      throw new Error(`Failed to load split bundle from URL: ${url}\\n${body}`);\r\n    }\r\n  });\r\n}\r\n\r\nfunction jsonParseOptional(json: string): any {\r\n  try {\r\n    return JSON.parse(json);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n"],"mappings":"AAMA,SAASA,gBAAgB,QAAQ,UAAU;AAC3C,SAASC,UAAU,QAAQ,cAAc;AAMzC,OAAO,SAASC,kBAAkBA,CAACC,GAAW,EAAiB;EAC7D,OAAOF,UAAU,CAACE,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC;IAAEC,IAAI;IAAEC,MAAM;IAAEC;EAAQ,CAAC,KAAK;IACzD,IACEA,OAAO,EAAEC,GAAG,GAAG,cAAc,CAAC,IAAI,IAAI,IACtCD,OAAO,CAACE,GAAG,CAAC,cAAc,CAAC,CAAEC,QAAQ,CAAC,kBAAkB,CAAC,EACzD;MAEA,MAAM,IAAIC,KAAK,CAACC,IAAI,CAACC,KAAK,CAACR,IAAI,CAAC,CAACS,OAAO,IAAI,2BAA2BX,GAAG,GAAG,CAAC;IAChF;IAEA,IAAIG,MAAM,KAAK,GAAG,EAAE;MAElB,OAAOS,IAAI,CAACV,IAAI,CAAC;IACnB,CAAC,MAAM;MAEL,IAAIW,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;QAG1C,MAAMC,KAAK,GAAGC,iBAAiB,CAACf,IAAI,CAAC;QACrC,IAAIc,KAAK,EAAE;UAGT,MAAM,IAAInB,gBAAgB,CAACmB,KAAK,EAAEhB,GAAG,CAAC;QACxC;MACF;MAEA,MAAM,IAAIQ,KAAK,CAAC,yCAAyCR,GAAG,KAAKE,IAAI,EAAE,CAAC;IAC1E;EACF,CAAC,CAAC;AACJ;AAEA,SAASe,iBAAiBA,CAACC,IAAY,EAAO;EAC5C,IAAI;IACF,OAAOT,IAAI,CAACC,KAAK,CAACQ,IAAI,CAAC;EACzB,CAAC,CAAC,MAAM;IACN,OAAO,IAAI;EACb;AACF","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}